!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e142a262-f1c9-43d6-b4d3-00510984886d",e._sentryDebugIdIdentifier="sentry-dbid-e142a262-f1c9-43d6-b4d3-00510984886d")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5116],{1557:function(e,t,n){n.d(t,{U:function(){return r}});let r=(0,n(52983).createContext)({})},35117:function(e,t,n){n.d(t,{u:function(){return x}});var r=n(97458),a=n(52983),o=n(23113),l=n(90312),u=n(91394),c=n(25288),i=n(19170),s=n(7616),d=n(45451);let f=()=>(0,a.useCallback)(e=>{let{collectionId:t,collectionName:n,fileId:r,location:a}=e;(0,d.sendGTMEvent)({collection_id:t,collection_name:n,event_name:"add_to_collection",event:"ga4event",file_id:r,location:a})},[]),m=()=>(0,a.useCallback)(e=>{let{location:t,fileId:n}=e;(0,d.sendGTMEvent)({event:"ga4event",event_name:"collect",location:t,file_id:n})},[]);var v=n(6418),h=n(32951),p=n(57577),g=n(94498),w=n(2983),b=n(58058),y=n.n(b),_=n(10893);let C=()=>{let{t:e}=(0,_.$G)("detailCommon");return(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-4 py-2 text-sm text-surface-foreground-1",children:[(0,r.jsx)("span",{className:"whitespace-nowrap text-sm font-semibold text-surface-foreground-1",children:e("savedSuccessfully")}),(0,r.jsx)(y(),{href:"/user/collections",legacyBehavior:!0,children:(0,r.jsx)("span",{className:"cursor-pointer whitespace-nowrap text-xs font-normal !text-surface-foreground-accent-0",children:e("seeMyCollections")})})]})},R=e=>{let{type:t,id:n,location:d}=e,[b,y]=(0,a.useState)(null),_=(0,a.useRef)(!1),[R,N]=(0,a.useState)(!1),[k,x]=(0,a.useState)(null),E=(0,s.b9)(g.mX),I=f(),O=m(),S=(0,o.a)("smMax"),T=(0,u.d)(),j=(0,c.NL)(),P=(0,v.gx)(),{signUpUrl:D,setLoginCookies:L}=(0,l.e)(),{openToast:M}=(0,i.x_)(),U=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!_.current||e)try{e?P():E(!0);let t=await j.fetchQuery((0,v.us)({page:1,resourceId:n}));x(t),_.current=!0}catch(e){console.error("Error fetching collections when opening the popover:",e)}finally{e||E(!1)}},[j,n,E,P]),Q=async()=>{if(!T){L(),window.location.href=D;return}(0,w.B)(t,"add_to_collection"),await U(),N(!0),O({location:d,fileId:n})},z=e=>y(t=>[...null!=t?t:[],e]),G=e=>y(t=>{var n;return null!==(n=null==t?void 0:t.filter(t=>t!==e))&&void 0!==n?n:[]}),A=(0,a.useCallback)(async(e,a)=>{try{z(e),await (0,p.R)({id:n,collectionId:e,resourceType:t}),I({fileId:n,collectionId:e,collectionName:a,location:d}),M({message:(0,r.jsx)(C,{}),showIcon:!1,showCloseButton:!1,position:S?"bottom-center":"top-right"}),await U(!0)}catch(e){console.error(e),M()}finally{G(e),S&&N(!1)}},[n,t,I,d,M,S,U]);return{responseCollections:k,collectionIdsLoading:b,isOpen:R,setIsOpen:N,onButtonOpenClick:Q,handleAddToCollection:A,handleRemoveFromCollection:(0,a.useCallback)(async e=>{try{z(e),await (0,h.N)({id:n,collectionId:e,resourceType:t}),await U(!0)}catch(e){console.error(e),M()}finally{G(e)}},[n,M,t,U]),handleOpenChange:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];N(e)}}};var N=n(8095),k=n(1557);let x=e=>{let{children:t,id:n,type:o,location:l}=e,{responseCollections:u,collectionIdsLoading:c,isOpen:i,setIsOpen:s,onButtonOpenClick:d,handleOpenChange:f,handleAddToCollection:m,handleRemoveFromCollection:v}=R({type:o,id:n,location:l}),{searchCollections:h,isSearchByApi:p,handleSearch:g}=(0,N.j)(),w=(0,a.useMemo)(()=>({id:n,type:o,searchCollections:h,responseCollections:u,collectionIdsLoading:c,isSearchByApi:p,isOpen:i,setIsOpen:s,handleSearch:g,handleAddToCollection:m,handleRemoveFromCollection:v,onButtonOpenClick:d,handleOpenChange:f}),[n,o,h,u,c,p,i,d,s,m,v,g,f]);return(0,r.jsx)(k.U.Provider,{value:w,children:t})}},88659:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(52983),a=n(1557);let o=()=>(0,r.useContext)(a.U)},8095:function(e,t,n){n.d(t,{j:function(){return c}});var r=n(7616),a=n(52983),o=n(94498),l=n(99);let u=()=>{let{data:e,meta:{pagination:{nextPage:t}}}=(0,r.Dv)(o.HQ);return{collections:e,nextPage:t}},c=()=>{let{collections:e,nextPage:t}=u(),[n,c]=(0,a.useState)([]),i=(0,r.b9)(o.GD),s=(0,a.useRef)();(0,a.useEffect)(()=>{(null==e?void 0:e.length)>0&&c(e.map(l.V))},[e,t]);let d=null!==t,f=t=>{c((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))).map(l.V))},m=async e=>{s.current&&clearTimeout(s.current),s.current=setTimeout(async()=>{i(e)},350)};return{isSearchByApi:d,searchCollections:n,handleSearch:e=>{d?m(e):f(e)}}}},99:function(e,t,n){n.d(t,{V:function(){return r}});let r=e=>{var t,n;return{id:e.id,name:e.name,author:(null===(t=e.author)||void 0===t?void 0:t.name)||void 0,hasResourceInCollection:e.hasResourceInCollection,preview:null===(n=e.previews[0])||void 0===n?void 0:n.url}}},18377:function(e,t,n){n.d(t,{e:function(){return c},d:function(){return l.d}});var r=n(97458),a=n(53344),o=n.n(a),l=n(54565);let u=o()(()=>n.e(6106).then(n.bind(n,76106)).then(e=>e.EnabledClipboardNotSupportedAdvice),{loadableGenerated:{webpack:()=>[76106]},ssr:!1}),c=()=>(0,l.Q)()?null:(0,r.jsx)(u,{})},54565:function(e,t,n){n.d(t,{Q:function(){return o},d:function(){return l}});var r=n(7616);let a=(0,n(24399).cn)(!0),o=()=>(0,r.Dv)(a),l=()=>(0,r.b9)(a)},66209:function(e,t,n){n.d(t,{I:function(){return c},N:function(){return l.N}});var r=n(97458),a=n(53344),o=n.n(a),l=n(81087);let u=o()(()=>Promise.all([n.e(978),n.e(8512)]).then(n.bind(n,78512)).then(e=>e.ConfirmSafariClipboardComponent),{loadableGenerated:{webpack:()=>[78512]},ssr:!1}),c=()=>{let{onSucess:e}=(0,l.N)();return e&&(0,r.jsx)(u,{})}},81087:function(e,t,n){n.d(t,{N:function(){return o}});var r=n(7616);let a=(0,n(24399).cn)(null),o=()=>{let[e,t]=(0,r.KO)(a);return{onClose:()=>t(null),setConfirm:e=>t({onSuccess:e}),onSucess:null==e?void 0:e.onSuccess}}},65724:function(e,t,n){n.d(t,{W:function(){return l}});var r=n(49558),a=n(52983),o=n(21455);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"resource_detail_premium",{setShowModal:l,setOrigin:u,setTrackerClick:c,setResourceData:i,setCheckoutQueryParams:s,setModalType:d}=(0,o.u)(),f=(0,a.useMemo)(()=>({category:t,location:n,ACTION:"go_premium",...e&&{resource_id:e}}),[t,n,e]),[m,v]=(0,r.n9)(f);return(0,a.useCallback)(e=>{let{resourceData:t,origin:n,onButtonClick:r=()=>void 0,checkoutQueryParams:a,modalType:o="premiumContent"}=e;u(n),c(()=>v),i(t),s(a),d(o),m(),r(),l(!0)},[u,c,i,s,d,m,l,v])}},80719:function(e,t,n){n.d(t,{X:function(){return a}});var r=n(63202);let a=e=>{let{page:t,resourceId:n,searchTerm:a,collectionIds:o,ownership:l}=e,u=o?o.join(","):void 0,c={page:"".concat(t),...n&&{resourceId:"".concat(n)},...a&&{"filter[term]":a},...u&&{"filter[ids]":u},...l&&{"filter[ownership]":l}},i="/api/user/collections?".concat(new URLSearchParams(c));return(0,r.c)(i,"GET")}},6418:function(e,t,n){n.d(t,{us:function(){return s},lL:function(){return d},gx:function(){return f}});var r=n(78511),a=n(25288),o=n(7616),l=n(52983),u=n(80719),c=n(94498);let i=["collections","all"],s=e=>{let{page:t,searchTerm:n,resourceId:r}=e;return{queryKey:[...i,{page:t,resourceId:r,searchTerm:n}],queryFn:async()=>{let{data:e,success:a}=await (0,u.X)({page:t,resourceId:r,searchTerm:n});if(!a)throw Error(e);return e}}},d=e=>{let{page:t=1,resourceId:n}=e,a=(0,o.Dv)(c.GD);return(0,r.a)(s({page:t,searchTerm:a,resourceId:null!=n?n:null}))},f=()=>{let e=(0,a.NL)();return(0,l.useCallback)(()=>{e.invalidateQueries({queryKey:i})},[e])}},32951:function(e,t,n){n.d(t,{N:function(){return a}});var r=n(63202);let a=async e=>{let{id:t,collectionId:n,resourceType:a}=e,o=new URLSearchParams;return o.append("collectionId",n.toString()),o.set("resourceType",a),await (0,r.c)("/api/user/resources/".concat(t,"/collections?").concat(o.toString()),"DELETE")}},57577:function(e,t,n){n.d(t,{R:function(){return a}});var r=n(63202);let a=async e=>{let{id:t,collectionId:n,resourceType:a}=e;return await (0,r.c)("/api/user/resources/".concat(t,"/collections"),"POST",{collectionId:n,resourceType:a})}},94498:function(e,t,n){n.d(t,{GD:function(){return a},HQ:function(){return o},mX:function(){return u},w0:function(){return l}});var r=n(24399);let a=(0,n(73139).rw)(null),o=(0,r.cn)({data:[],meta:{pagination:{nextPage:null,perPage:0,prevPage:null,currentPage:0}}}),l=(0,r.cn)([]),u=(0,r.cn)(!1)},21455:function(e,t,n){n.d(t,{u:function(){return o}});var r=n(52983),a=n(26670);let o=()=>{let e=(0,r.useContext)(a.o);if(null===e)throw Error("useModalPricingState must be used within a ModalPricingContext");return e}},33247:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(51780),a=n(52983),o=n(26140);let l={ai:"photo",mockup:"vector",template:"vector"},u={keyword:"tag",collections:"collection",image_search:"search",image_search_similar:"search",user_recommendations_home:"home",popular:"search",recent:"search",family:"author"},c={"/collection":"collection"},i=()=>{let e=(0,o.Q)(),{pathname:t}=(0,r.useRouter)(),n=null==e?void 0:e.fromView;if(n){var a;return null!==(a=u[n])&&void 0!==a?a:n}return c[t]},s=()=>{let e=i();return(0,a.useCallback)(t=>{var n;let{type:r,subtype:a,authorName:o,isPremium:u,isAIGenerated:c,eventName:i,pageType:s,businessLine:d="content",editor:f,tool:m}=t,v=new URLSearchParams;v.set("business_line",d);let h=null!=s?s:e;return h&&v.set("page_type",h),v.set("item_type",null!==(n=l[r])&&void 0!==n?n:r),a&&v.set("item_subtype",a),o&&v.set("item_author",o),f&&v.set("editor",f),m&&v.set("tool",m),v.set("is_premium_item",u.toString()),v.set("is_ai_generated",c.toString()),v.set("event_name",i),v},[e])}},81612:function(e,t,n){n.d(t,{N:function(){return a}});var r=n(52983);let a=(e,t)=>(0,r.useCallback)(n=>e?{positionRelative:n%e,page:Math.floor(n/e)+(null!=t?t:1)}:{positionRelative:n,page:null!=t?t:1},[e,t])},30143:function(e,t,n){n.d(t,{O5:function(){return c.O},Y4:function(){return r.Y},aZ:function(){return i.a},fb:function(){return a.f},g9:function(){return o.g},mS:function(){return l.m},ug:function(){return s.u},yV:function(){return u.y}});var r=n(15190),a=n(46615),o=n(83196),l=n(53466),u=n(47404),c=n(6715),i=n(61390),s=n(76160)},46615:function(e,t,n){n.d(t,{f:function(){return o}});var r=n(52983),a=n(62573);let o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{fromView:o,position:u,fromElement:c,track:i,uuid:s,query:d}=n,f=(0,a.Q)();return(0,r.useMemo)(()=>{var n;let r=null!==(n=f(e))&&void 0!==n?n:{},a=l(r={...r,...o&&{fromView:o},...u&&{position:u},...i&&{track:i},...c&&{from_element:c},...s&&{uuid:s},...d&&{query:d}});if(0===Object.keys(a).length)return t;let m=new URLSearchParams(a);return"".concat(t,"#").concat(m.toString())},[f,e,o,u,i,c,s,d,t])},l=e=>{if(!e)return{};let t={};for(let n in e)void 0!==e[n]&&null!==e[n]&&(t[n]="".concat(e[n]));return t}},53466:function(e,t,n){n.d(t,{m:function(){return f}});var r=n(72234),a=n(68147),o=n(56106),l=n(25983),u=n(52983),c=n(43077),i=n(33284),s=n(62573);let d=()=>{let e=(0,s.Q)(),t=(0,i.H)();return(0,u.useCallback)(n=>{let r=e(n);return r?{...r,fromView:"thumbnail_".concat(r.fromView),uuid:r.uuid}:{...t}},[e,t])},f=()=>{let e=(0,l.ZK)(),t=(0,a.I)(),n=(0,o.H)(),i=(0,r.Lh)(),s=d();return(0,u.useCallback)(r=>{let{resourceId:a,isResourcePremium:o,resourceType:l,downloadType:u="download",variant:d,fileType:f}=r,{fromView:m,collectionId:v,page:h,position:p,uuid:g}=s(a);c.s.send("download",{language:e,id:"".concat(a),resourcePremium:o?"1":"0",format:m||"detail",resourceType:l,...v&&{collectionId:"".concat(v)},...h&&{page:"".concat(h)},...void 0!==p&&{position:"".concat(p)},...u&&{downloadType:u},...t&&{userid:"".concat(t),userPremium:n?"1":"0"},...g&&{uuid:g},...d&&{variant:d},...f&&{fileType:f},...i&&{wallet_id:i}})},[s,e,t,n,i])}},6715:function(e,t,n){n.d(t,{O:function(){return c}});var r=n(26219),a=n(52983),o=n(5704),l=n(7009);let u={photo:"regular",vector:"regular",ai:"regular",psd:"psd"},c=()=>{let e=(0,o.Jn)("term")||"",t=(0,l.J)();return(0,a.useCallback)((n,a,o)=>{let l="send&event&click-".concat(a).concat(e?"&".concat(e):"","&").concat(n).concat(o?"&".concat(u[o]):"").concat(t);(0,r.O)(l)},[e,t])}},62573:function(e,t,n){n.d(t,{Q:function(){return l}});var r=n(52983),a=n(81612),o=n(26140);let l=()=>{let e=(0,o.Q)(),t=(0,a.N)(null==e?void 0:e.itemsPerPage,null==e?void 0:e.page);return(0,r.useCallback)(n=>{if(!e)return null;let{fromView:r,collectionId:a,page:o,items:l,uuid:u}=e,c=l.findIndex(e=>{let{id:t}=e;return n===t}),{positionRelative:i}=t(c),s=(null==e?void 0:e.itemsPerPage)?Math.floor(c/e.itemsPerPage)+(null!=o?o:1):o;return{fromView:r,...a&&{collectionId:a},...s&&{page:s},...i>-1&&{position:i},...u&&{uuid:u}}},[t,e])}},7009:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(72234);let a=()=>{let e=(0,r.Lh)();return e?"&wallet_id=".concat(e):""}},2983:function(e,t,n){n.d(t,{B:function(){return a}});var r=n(26219);let a=(e,t)=>{if("3d"===e||"font"===e)return;"icon"!==e&&"video"!==e&&(e="regular");let n="send&event&detail&type=".concat(e,"&button_click=").concat(t,"&event_at=").concat(new Date().getTime());(0,r.O)(n)}},63202:function(e,t,n){n.d(t,{c:function(){return r}});let r=async(e,t,n,r)=>{let a=r?new Headers:void 0;return(null==r?void 0:r.locale)&&a&&a.set("accept-language",r.locale),(null==r?void 0:r.cache)&&a&&a.set("cache",r.cache),fetch(e,{method:t,...n&&{body:JSON.stringify(n)},...r&&{...r,headers:a}}).then(async e=>e.ok?{success:!0,data:204===e.status?null:await e.json()}:400===e.status?{success:!1,data:e.statusText}:401===e.status||405===e.status?{success:!1,data:"AUTHENTICATION_ERROR"}:403===e.status?{success:!1,data:"FORBIDDEN"}:500===e.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:404===e.status?{success:!1,data:"NOT_FOUND"}:429===e.status?{success:!1,data:"TOO_MANY_REQUESTS"}:{success:!1,data:await e.json()})}},43186:function(e,t,n){n.d(t,{J:function(){return i}});var r=n(52983);let a=async e=>{let{walletId:t}=e,n=await fetch(t?"/api/user/downloads/limit?walletId=".concat(t):"/api/user/downloads/limit");return n.ok?{success:!0,data:await n.json()}:401===n.status||403===n.status||405===n.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===n.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}};var o=n(1850);o.z.object({data:o.z.object({filename:o.z.string(),url:o.z.string(),today_downloads:o.z.number(),download_limit:o.z.number()}).transform(e=>{let{download_limit:t,today_downloads:n,...r}=e;return{todayDownloads:n,downloadLimit:t,...r}})}),o.z.object({data:o.z.object({current:o.z.number(),limit:o.z.number()})}).transform(e=>{let{data:t}=e;return t});var l=n(72234),u=n(28380),c=n(6476);let i=()=>{let e=(0,l.Lh)(),t=(0,c.aj)();return(0,r.useCallback)(async()=>{let{success:n,data:r}=await a({walletId:e});if(!n)throw Error("Error fetching user download info");let o={downloads:(null==r?void 0:r.current)||0,limit:(null==r?void 0:r.limit)||0};return t(o),u.f.update({downloads:o.downloads,limit_downloads:o.limit}),o},[t,e])}},85229:function(e,t,n){n.d(t,{l:function(){return l}});var r=n(7616),a=n(72234);let o=(0,n(24399).cn)(!1),l=()=>{let{isUnpaid:e}=(0,a.RI)(),[t,n]=(0,r.KO)(o);return{isUserWinback:e,isOpenWinbackModal:t,showWinbackModal:()=>n(!0),hideWinbackModal:()=>n(!1)}}}}]);